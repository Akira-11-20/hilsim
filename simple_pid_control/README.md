# シンプルPID制御シミュレーション

現在のHILSシステムのPID制御問題を解決するために作成した、独立したシンプルなPID制御シミュレーション。

## ファイル構成

- `simple_pid_sim.py` - 基本的なPID制御シミュレーション
- `optimized_pid_sim.py` - 複数のPIDパラメータを比較するテストツール
- `README.md` - このファイル

## 実行方法

### 基本シミュレーション
```bash
cd simple_pid_control
python3 simple_pid_sim.py
```

### パラメータ比較テスト
```bash
cd simple_pid_control  
python3 optimized_pid_sim.py
```

## 結果サマリー

### 現在のHILSシステムの問題点
- 低すぎるPIDゲイン: Kp=0.8, Ki=0.05, Kd=1.0
- ZMQ通信による遅延とタイミング問題
- 不適切な重力補償

### 改善されたシミュレーションの性能
最適化パラメータ（Aggressive設定）:
- **Kp=18.0, Ki=2.5, Kd=10.0**
- 定常誤差: 0.110m (11cm) 
- オーバーシュート: 2.570m
- 整定時間: 1.05秒
- 最終高度精度: ±1cm以内

### 主な改善点
1. **通信遅延の除去**: 単一プロセス内で完結
2. **適切なPIDゲイン**: 現在の20倍以上の応答性
3. **効果的な積分windup防止**: 制御の安定化
4. **現実的な制約**: 推力制限、センサーノイズ

## 推薦設定

HILSシステムへの適用推薦パラメータ:
```yaml
controller:
  kp: 18.0    # 比例ゲイン（現在: 0.8）
  ki: 2.5     # 積分ゲイン（現在: 0.05）
  kd: 10.0    # 微分ゲイン（現在: 1.0）
```

## 性能比較

| 設定 | Kp | Ki | Kd | 定常誤差[m] | オーバーシュート[m] | 整定時間[s] |
|------|----|----|----|-----------:|------------------:|------------:|
| 現在のHILS | 0.8 | 0.05 | 1.0 | > 1.0 | ? | > 10.0 |
| Conservative | 8.0 | 0.5 | 6.0 | 0.258 | 0.452 | 1.58 |
| **Aggressive** | **18.0** | **2.5** | **10.0** | **0.110** | **2.570** | **1.05** |
| Balanced | 12.0 | 1.5 | 8.0 | 0.218 | 0.780 | 1.27 |